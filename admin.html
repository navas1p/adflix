<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adflix Admin Panel</title>
    <!-- Import Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Import Google Font (Inter) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* slate-900 */
            color: #cbd5e1; /* slate-300 */
        }
        
        /* Gen Z vibrant accent color */
        :root {
            --accent-color: #E024C4; /* Vibrant Pink/Magenta */
        }

        /* Sidebar active link */
        .sidebar-link.active-link {
            background-color: var(--accent-color);
            color: white;
            font-weight: 600;
        }
        .sidebar-link:hover:not(.active-link) {
            background-color: #1e293b; /* slate-800 */
        }
        
        /* Hide all pages by default */
        .admin-page {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }
        /* Show the active page */
        .admin-page.active-page {
            display: block;
        }
        
        /* Fade-in animation for pages */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Modal styles */
        #modal-overlay {
            transition: opacity 0.3s ease-in-out;
        }
        #modal-content {
            transition: transform 0.3s ease-in-out;
            transform: translateY(20px);
        }
        #modal-overlay.flex {
            opacity: 1 !important;
        }
        #modal-overlay.flex #modal-content {
            transform: translateY(0);
        }
        
        /* Custom scrollbar for sidebar (optional) */
        #sidebar::-webkit-scrollbar {
            width: 4px;
        }
        #sidebar::-webkit-scrollbar-thumb {
            background-color: #334155; /* slate-700 */
            border-radius: 4px;
        }
        #sidebar::-webkit-scrollbar-track {
            background-color: transparent;
        }
    </style>
</head>
<body class="flex min-h-screen">

    <!-- Sidebar -->
    <aside id="sidebar" class="w-64 bg-slate-800 p-6 flex flex-col fixed h-full overflow-y-auto shadow-lg">
        <h1 class="text-3xl font-extrabold text-white mb-10">adflix<span class="text-[var(--accent-color)]">.</span></h1>
        
        <nav class="flex flex-col space-y-2">
            <button class="sidebar-link flex items-center space-x-3 p-3 rounded-lg" onclick="showPage('models')">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                <span>Manage Models</span>
            </button>
            <button class="sidebar-link flex items-center space-x-3 p-3 rounded-lg" onclick="showPage('videos')">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect></svg>
                <span>Manage Videos</span>
            </button>
            <button class="sidebar-link flex items-center space-x-3 p-3 rounded-lg" onclick="showPage('feed')">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg>
                <span>Manage Feed</span>
            </button>
            <button class="sidebar-link flex items-center space-x-3 p-3 rounded-lg" onclick="showPage('services')">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                <span>Manage Services</span>
            </button>
            <button class="sidebar-link flex items-center space-x-3 p-3 rounded-lg" onclick="showPage('notifications')">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
                <span>Notifications</span>
            </button>
            <button class="sidebar-link flex items-center space-x-3 p-3 rounded-lg" onclick="showPage('users')">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                <span>Users</span>
            </button>
        </nav>
        
        <div class="mt-auto">
            <button class="sidebar-link w-full flex items-center space-x-3 p-3 rounded-lg text-red-400 hover:bg-red-500/10">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                <span>Log Out</span>
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="ml-64 flex-grow p-10">

        <!-- Page: Manage Models -->
        <div id="page-models" class="admin-page">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-4xl font-bold text-white">Manage Models</h2>
                <button class="flex items-center space-x-2 bg-[var(--accent-color)] text-white font-semibold py-2 px-5 rounded-lg hover:opacity-80 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    <span>Add Model</span>
                </button>
            </div>
            
            <div class="bg-slate-800 rounded-xl shadow-lg overflow-hidden">
                <table class="w-full text-left text-slate-300">
                    <thead class="bg-slate-700/50">
                        <tr class="text-slate-400">
                            <th class="p-4 font-semibold">Name</th>
                            <th class="p-4 font-semibold">Height</th>
                            <th class="p-4 font-semibold">Waist</th>
                            <th class="p-4 font-semibold">Status</th>
                            <th class="p-4 font-semibold">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="models-table-body" class="divide-y divide-slate-700/50">
                        <!-- Data will be injected here -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Page: Manage Videos (Placeholder) -->
        <div id="page-videos" class="admin-page hidden">
            <h2 class="text-4xl font-bold text-white">Manage Videos</h2>
            <p class="mt-4">Content for managing videos goes here...</p>
        </div>
        
        <!-- Page: Manage Feed (Placeholder) -->
        <div id="page-feed" class="admin-page hidden">
            <h2 class="text-4xl font-bold text-white">Manage Feed</h2>
            <p class="mt-4">Content for managing the feed goes here...</p>
        </div>
        
        <!-- Page: Manage Services (Placeholder) -->
        <div id="page-services" class="admin-page hidden">
            <h2 class="text-4xl font-bold text-white">Manage Services</h2>
            <p class="mt-4">Content for managing services goes here...</p>
        </div>

        <!-- Page: Notifications -->
        <div id="page-notifications" class="admin-page hidden">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-4xl font-bold text-white">Notifications</h2>
            </div>
            
            <div class="bg-slate-800 rounded-xl shadow-lg overflow-hidden">
                <table class="w-full text-left text-slate-300">
                    <thead class="bg-slate-700/50">
                        <tr class="text-slate-400">
                            <th class="p-4 font-semibold">Date</th>
                            <th class="p-4 font-semibold">Type</th>
                            <th class="p-4 font-semibold">Name</th>
                            <th class="p-4 font-semibold">Mobile Number</th>
                            <th class="p-4 font-semibold">Email</th>
                            <th class="p-4 font-semibold">Actions</th>
                            <th class="p-4 font-semibold">Status</th>
                        </tr>
                    </thead>
                    <tbody id="enquiries-table-body" class="divide-y divide-slate-700/50">
                        <!-- Data will be injected here -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- NEW Page: Users -->
        <div id="page-users" class="admin-page hidden">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-4xl font-bold text-white">Manage Users</h2>
            </div>
            
            <div class="bg-slate-800 rounded-xl shadow-lg overflow-hidden">
                <table class="w-full text-left text-slate-300">
                    <thead class="bg-slate-700/50">
                        <tr class="text-slate-400">
                            <th class="p-4 font-semibold">Name</th>
                            <th class="p-4 font-semibold">Mobile Number</th>
                            <th class="p-4 font-semibold">Email</th>
                            <!-- Download Button Header -->
                            <th class="p-4 font-semibold text-right">
                                <button onclick="downloadUsersCSV()" class="flex items-center space-x-2 text-green-400 hover:text-green-300 font-semibold ml-auto">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-download-cloud"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><path d="M12 12v9"/><path d="m8 17 4 4 4-4"/></svg>
                                    <span>Download Excel</span>
                                </button>
                            </th>
                        </tr>
                    </thead>
                    <tbody id="users-table-body" class="divide-y divide-slate-700/50">
                        <!-- Data will be injected here -->
                    </tbody>
                </table>
            </div>
        </div>

    </main>

    <!-- View Enquiry Modal -->
    <div id="modal-overlay" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 opacity-0 hidden backdrop-blur-sm" onclick="closeModal()">
        
        <div id="modal-content" class="bg-slate-800 w-full max-w-lg rounded-2xl shadow-2xl p-6 md:p-8 border border-slate-700" onclick="event.stopPropagation()">
            <!-- Modal Header -->
            <div class="flex items-center justify-between mb-6">
                <h3 id="modal-title" class="text-2xl font-bold text-white">Enquiry Details</h3>
                <button onclick="closeModal()" class="text-slate-400 hover:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>

            <!-- Modal Body -->
            <div class="space-y-4">
                <div>
                    <span class="text-sm font-semibold text-slate-400">Name</span>
                    <p id="modal-name" class="text-white text-lg"></p>
                </div>
                <div>
                    <span class="text-sm font-semibold text-slate-400">Contact</span>
                    <p id="modal-contact" class="text-white text-lg"></p>
                </div>
                <div>
                    <span class="text-sm font-semibold text-slate-400">Enquiry Type</span>
                    <p id="modal-type" class="text-white text-lg"></p>
                </div>
                <div>
                    <span class="text-sm font-semibold text-slate-400">Details</span>
                    <p id="modal-details" class="text-white text-lg bg-slate-700/50 p-3 rounded-lg"></p>
                </div>
            </div>
            
            <!-- Modal Footer Actions -->
            <div class="flex items-center justify-end space-x-4 mt-8">
                <button id="modal-contacted-btn" class="py-2 px-5 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-all">
                    Mark as Contacted
                </button>
                <button id="modal-closed-btn" class="py-2 px-5 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-all">
                    Mark as Closed
                </button>
            </div>
        </div>
    </div>


    <script>
        // --- MOCK DATA ---
        
        const mockModels = [
            { name: "Mia", height: "5' 9\"", waist: "24\"", status: "Active" },
            { name: "Leo", height: "6' 2\"", waist: "31\"", status: "Active" },
            { name: "Zoe", height: "5' 7\"", waist: "23\"", status: "On-Hold" },
            { name: "Kai", height: "5' 11\"", waist: "28\"", status: "Active" },
        ];
        
        let mockEnquiries = [
            { id: 1, date: "2025-11-14", type: "Model", name: "Alice Smith", mobile: "+1555123456", email: "alice@example.com", details: "Enquiring about Mia for a 3-day shoot.", status: "Open" },
            { id: 2, date: "2025-11-13", type: "Service", name: "Bob Johnson", mobile: "+1555654321", email: "bob@startup.com", details: "Looking to book the Podcast Studio for 4 hours.", status: "Contacted" },
            { id: 3, date: "2025-11-13", type: "Feed", name: "Charlie Brown", mobile: "+1555987654", email: "charlie@media.com", details: "Applying for 'Neon Nights' casting call.", status: "Open" },
            { id: 4, date: "2025-11-12", type: "Service", name: "David Lee", mobile: "+1555456789", email: "david.lee@film.co", details: "Requesting info on Premiere Support for a short film.", status: "Closed" },
        ];

        const mockUsers = [
            { name: "Registered User 1", mobile: "+1555111222", email: "user1@gmail.com" },
            { name: "Another User", mobile: "+1555333444", email: "another@yahoo.com" },
            { name: "Test User", mobile: "+1555888999", email: "test@domain.com" },
        ];

        // --- Page Navigation ---
        const pages = document.querySelectorAll('.admin-page');
        const links = document.querySelectorAll('.sidebar-link');
        
        function showPage(pageId) {
            // Hide all pages
            pages.forEach(page => {
                page.classList.remove('active-page');
            });
            // Show target page
            const targetPage = document.getElementById(`page-${pageId}`);
            if (targetPage) {
                targetPage.classList.add('active-page');
            }

            // Update active link
            links.forEach(link => {
                link.classList.remove('active-link');
                if (link.getAttribute('onclick') === `showPage('${pageId}')`) {
                    link.classList.add('active-link');
                }
            });
        }
        
        // --- Populate Models Table ---
        function populateModelsTable() {
            const tableBody = document.getElementById('models-table-body');
            if (!tableBody) return;
            tableBody.innerHTML = ''; // Clear existing
            
            mockModels.forEach(model => {
                const statusColor = model.status === 'Active' ? 'text-green-400' : 'text-yellow-400';
                const row = `
                    <tr class="hover:bg-slate-700/50 transition-colors">
                        <td class="p-4 flex items-center space-x-3">
                            <img src="https://placehold.co/40x40/1e293b/94a3b8?text=${model.name.charAt(0)}" alt="${model.name}" class="w-10 h-10 rounded-full">
                            <span class="font-semibold text-white">${model.name}</span>
                        </td>
                        <td class="p-4">${model.height}</td>
                        <td class="p-4">${model.waist}</td>
                        <td class="p-4">
                            <span class="font-semibold ${statusColor}">${model.status}</span>
                        </td>
                        <td class="p-4">
                            <button class="text-blue-400 hover:text-blue-300 mr-4 font-medium">Edit</button>
                            <button class="text-red-400 hover:text-red-300 font-medium">Delete</button>
                        </td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
        }

        // --- Populate Users Table ---
        function populateUsersTable() {
            const tableBody = document.getElementById('users-table-body');
            if (!tableBody) return;
            tableBody.innerHTML = ''; // Clear existing
            
            mockUsers.forEach(user => {
                const row = `
                    <tr class="hover:bg-slate-700/50 transition-colors">
                        <td class="p-4 flex items-center space-x-3">
                            <img src="https://placehold.co/40x40/1e293b/94a3b8?text=${user.name.charAt(0)}" alt="${user.name}" class="w-10 h-10 rounded-full">
                            <span class="font-semibold text-white">${user.name}</span>
                        </td>
                        <td class="p-4">${user.mobile}</td>
                        <td class="p-4">${user.email}</td>
                        <td class="p-4"></td> <!-- Empty cell for download button column -->
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
        }

        // --- Populate Enquiries Table ---
        function populateEnquiriesTable() {
            const tableBody = document.getElementById('enquiries-table-body');
            if (!tableBody) return;
            tableBody.innerHTML = ''; // Clear existing

            mockEnquiries.forEach(enquiry => {
                let statusClass = '';
                switch(enquiry.status) {
                    case 'Open': statusClass = 'bg-blue-500/20 text-blue-300'; break;
                    case 'Contacted': statusClass = 'bg-yellow-500/20 text-yellow-300'; break;
                    case 'Closed': statusClass = 'bg-red-500/20 text-red-300'; break;
                }
                
                const row = `
                    <tr class="hover:bg-slate-700/50 transition-colors">
                        <td class="p-4">${enquiry.date}</td>
                        <td class="p-4">${enquiry.type}</td>
                        <td class="p-4 font-semibold text-white">${enquiry.name}</td>
                        <td class="p-4">${enquiry.mobile}</td>
                        <td class="p-4">${enquiry.email}</td>
                        <td class="p-4">
                            <button class="text-blue-400 hover:text-blue-300 font-medium" onclick="viewEnquiry(${enquiry.id})">
                                View
                            </button>
                        </td>
                        <td class="p-4">
                            <span class="text-xs font-semibold px-3 py-1 rounded-full ${statusClass}">
                                ${enquiry.status}
                            </span>
                        </td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
        }

        // --- Modal Logic ---
        const modalOverlay = document.getElementById('modal-overlay');
        const modal = {
            title: document.getElementById('modal-title'),
            name: document.getElementById('modal-name'),
            contact: document.getElementById('modal-contact'),
            type: document.getElementById('modal-type'),
            details: document.getElementById('modal-details'),
            contactedBtn: document.getElementById('modal-contacted-btn'),
            closedBtn: document.getElementById('modal-closed-btn'),
        };
        
        let currentEnquiryId = null;

        function viewEnquiry(id) {
            const enquiry = mockEnquiries.find(e => e.id === id);
            if (!enquiry) return;
            
            currentEnquiryId = id;
            
            modal.title.textContent = `Enquiry: ${enquiry.name}`;
            modal.name.textContent = enquiry.name;
            modal.contact.textContent = `${enquiry.email} | ${enquiry.mobile}`;
            modal.type.textContent = enquiry.type;
            modal.details.textContent = enquiry.details;
            
            // Set up button actions
            modal.contactedBtn.onclick = () => updateEnquiryStatus(id, 'Contacted');
            modal.closedBtn.onclick = () => updateEnquiryStatus(id, 'Closed');

            modalOverlay.classList.remove('hidden');
            setTimeout(() => modalOverlay.classList.add('flex'), 10);
        }

        function closeModal() {
            modalOverlay.classList.remove('flex');
            setTimeout(() => modalOverlay.classList.add('hidden'), 300);
            currentEnquiryId = null;
        }
        
        function updateEnquiryStatus(id, newStatus) {
            const enquiry = mockEnquiries.find(e => e.id === id);
            if (enquiry) {
                enquiry.status = newStatus;
                populateEnquiriesTable(); // Re-render the table
                closeModal();
            }
        }

        // --- Download Users CSV Function ---
        function downloadUsersCSV() {
            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "Name,Mobile Number,Email\r\n"; // Header row

            mockUsers.forEach(user => {
                const row = [user.name, user.mobile, user.email].join(",");
                csvContent += row + "\r\n";
            });

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "adflix_users.csv");
            document.body.appendChild(link); // Required for Firefox

            link.click();
            document.body.removeChild(link);
        }

        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            showPage('models'); // Show models page by default
            populateModelsTable();
            populateEnquiriesTable();
            populateUsersTable();
        });

    </script>
</body>
</html>